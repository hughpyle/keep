
* `keep` with no args -> return the 'now doc'
    - also need a way to update this document
    - user doesn't specify its id, idk there's a guid or something assigned
    - we should keep a history of the nowdoc
        - which is quite interesting, it's everything you've been doing
        - does that lead to task-blending?  if you're working on multiple things at once?
            - use tags to identify the task(s) that you're working on
            - list nowdocs in historical order, filtered by tag (and always include the "original nowdoc" at the end of  the list)
            - "task" within "project" as the suggested way to do this
            - just "keep" can list the current projects & their tasks in a tree if you want (list the nowdocs by distinct...)
            - when you want to mark a task as done, or a project as completed or archived -> use tags
    - need a way to get the historical versions (maybe they just have a timestamp in their ID, or something)
        - any time you update the nowdoc, this is different from all the other update paths that have no memory
        - it saves the old one and replaces your new one
    - there's only one, how do you find it?  with a `__sys`: `now` tag or something like that?  is that fast enough?
    - if there's none, e.g. first time you every used `keep`, we should store the primary instructions
        - could do that when `keep init` because the database is empty
        - so the default nowdoc is literally the skill instructions
        - maybe it has the SKILL.md and the "patterns" all together?  and summary?
        - check with the model, for context token budget
    - this replaces all the "top-of-mind" stuff in `later/` (except for "recent")
        - the later thing for "topics" is more explicit than using tasks/projects, but same goal
        - actually "topics" is a much better word than "tasks" because this is not really a task-focused skill
    - maybe "project" and "topic" tags (literally) are enough
        - we'll use them by convention, but show them in all the examples
        - concrete examples of using the nowdoc by project/topic
        - need a way to "list current topics", "list current projects" as well as just "get the nowdoc"
            - maybe that's the default in `keep` with no args:
              get the no-project/no-topic nowdoc (or default it)
              get the list of distinct projects, distinct topics, within a reasonable time and count limit
            - limit 10, and limit to the last 7 days, should be enough for a default?
                - "last N days" is subtle, not part of this task, don't have any time-limited behavior yet


* tags themselves should have summaries and full descriptions
    i.e. somewhere in the "system" store is a docuemnt that describes a tag
    of course it's optional, you can just tag things in an open-ended way
    but sure would be useful for convention, as well as maintenance, if tags are documented by whoever uses them.
    doesn't really need to be in the "system" namespace but yeah it kihda does

    * then: provide a set of predefined things as files in `docs/system` that get loaded on `init`
      and include in there: a description of the "project" tag, a description of the "topic" tag
      (and whatever else we decide to pre-load... bearing in mind that pre-loaded content is for convention not specification!)
    * "project" and "topic" are the first two
      - placeholder descriptions for these are fine initially

* tag-by-model
    - is there a model-supported tagging? what would that need to be useful? (specific domains??)
      - i.e. as well as summarization, there's a "system document" that the model reads, and uses that document to decide which tags should be applied
      - it really needs to be one document per tag (because the model might choose multiple tags)
      - requires "system documents" so later
    - want this to be pluggable, guide the model-driven tagging from a sysdoc that defines how it works

* compare openclaw 'memory-lancedb' plugin

* update the REFERENCE.md
    (but don't do this until the 'nowdoc' is baked)

* check - what is your emotional response when encountering this project the first time?

* check for compatibility with linux (so far I've exclusively been running on macOS)
    can deploy on rpi at home
    also think about what would differ if we wanted to run this within docker, or in a k8s cluster

* check for compatibility with windows
    not sure we need to support powershell, only WSL? but paths etc. will vary
    and I don't know if windows has local models available through system services yet (would be nice)
    - this is all investigation work, not implementation  (I don't have a test environment)

* logs and messages should respect TERM (or the terminal capabilities) so that I can run this commandline
  on my ancient ASR33 teletype without dealing with ANSI escapes

* whose translation is this copy of the Ancrene Riwle?  Update the INDEX.md accordingly.
    (would prefer use a transcription of one of the original MS, instead of a translation!)

* Add github URL for the an5.57 text to the INDEX.md (and the HTML URL too)

* add support for the kimi/moonshot models, etc - what are we missing? compare claude code, openclaw

* add an audio track (mp3, flac, or something similar) to the library
    - keep it small tho, under a megabyte?
    - public domain recording of a song that resonates with the instructional content?
    - use as content but don't really want add dependencies on mp3/flace/wav decoding (especially anything requiring a license such as the fraunhofer stuff, all our deps must be MIT-compatible)
    - getting tags out of the file would be a great test case
    - analysis of the audio content will depend on the available models, but some might do a good job

* add an image; same strategy as audio

* openclaw install a heartbeat.  Not too often, but often enough.

* multi-embeddings
    - background task can detect current config and maintain compat

* review how system documents (e.g. "metaschema") are used today, if any
    - `keep system` needs some parameters for "latest N" or "latest timestamp"
      and those should be filters on all the list/search options too
      (like `keep tag -n 5` but also filter by date)
    - `keep list [--system]` would be better, cover non-system too 

* review the CLI completely.  Can the common tasks have single-letter aliases for their commands?

* "relevance / focus scores" are to be decveloped within the context of "topics / projects"
    - there isn't an absolute relevance
    - `keep similar` is close, is that enough?  no, we want to return results that include their relevance score
    - relevance includes timeliness, and the current topic/project context
        - so this means that topics and projects really are special?
        - or, can we do relevance-per-tag everywhere? so that topics and projects are just tags like everything else?
    - more thinking and research needed



* Unix has heredoc, keep has nowdoc, what else do we need?
    - or rather, is there functionality like a heredoc, that we should use for the nowdoc?


* other "system" behaviors?
    - zero, nada by default - is that ok?

* all the pip install extras - yuk
    makes the decision before you even know really
    - prefer somthing more dynamic, not sure what

* how do we get the claude-code model context?

* how do we get the vscode model context?  I really don't want to require a plugin too
    - can the agent just tell keep how to find the current providers??
    - that would be commandline, or per-session config, not per-repo or whatever (right???)

* can we do something similar for kiro?

* better update/degrade memory strategies: compare with current best of breed
    - want something that tracks last-retrieval time
    - not sure how that applies to the ranking for retrieval
    - do we need any of this to be config not code??

 
* compare the openclaw plugin against the other memory plugins on the hub

* move plugin into a `plugins` directory? yuk name, these are not "plugins for keep", so what?

* `context` text alongside summaries?
    - optional field for "why this matters" or additional notes
    - completely optional, not a priority

----

Done:

. start a todo list for notes
. move the test docs into docs/library (the soul docs)
. move docs/README to docs/INDEX.md
. be clear that the tags are overlay, not replace
. lazy-load embedding/summarization providers for offline read-only operations
. fix __del__ crash when embedding provider fails to initialize
. karma (AN5.57): "I am the owner of my deeds and heir to my deeds".
. `keep -v` please, for debug-level logging to stderr
. CLI-first documentation ordering in REFERENCE.md and QUICKSTART.md
. enable "local config" - tree-walk config discovery, KEEP_CONFIG envvar, store.path config option
. tag docs: "one value per key" documented in REFERENCE.md
. tag-update CLI and tag() API for updating existing documents
. delete tags via empty string or --remove flag
. `keep tag KEY` works with key only (any value)
. `keep tag --list` and `keep tag KEY --list`
. rename source_tags â†’ tags (with deprecation warning)
. KEEP_TAG_* environment variables for auto-tagging
. [tags] config section for default tags
. summaries: --summary flag, smart remember (short content verbatim), max_summary_length config
. documentstore already correct (stores only summaries, not full content)
. remember vs update: keep separate (different input semantics, both useful)
. model dimensions: lazy detection for unknown models (OpenAI, Gemini)
. `keep init` works offline - providers lazy-loaded, no network at init
. `process-pending` robust to offline - retries with max 5 attempts, graceful degradation
. startup cost optimized - read-only commands don't load providers
. error handling: log tracebacks to /tmp/keep-errors.log, show clean message to user
. timestamps always UTC - verified all datetime.now uses timezone.utc
. --since option for time-based filtering: accepts ISO duration (P3D, P1W, PT1H) or date (2026-01-15)
. time-based filtering on find, similar, search, tag commands
